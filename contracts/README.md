# Ref

Fork from: https://github.com/nhancv/smartcontracts-app

Remix online IDE
https://remix.ethereum.org/#optimize=true&runs=200&evmVersion=null&version=soljson-v0.8.3+commit.8d00100c.js

## IDE Extensions/Plugins

- Visual Studio Code:
  - https://marketplace.visualstudio.com/items?itemName=JuanBlanco.solidity
  - https://marketplace.visualstudio.com/items?itemName=EditorConfig.EditorConfig
  - https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode
  - https://marketplace.visualstudio.com/items?itemName=streetsidesoftware.code-spell-checker
- IntelliJ IDEA:
  - Solidity: https://plugins.jetbrains.com/plugin/9475-solidity
  - EditorConfig: https://plugins.jetbrains.com/plugin/7294-editorconfig
  - Prettier: https://plugins.jetbrains.com/plugin/10456-prettier

## Coding rules

https://protofire.github.io/solhint/

- To format all solidity contract files: `npm run format`
- To check lint: `npm run lint`

# Install

TRUFFLE CLI

https://www.trufflesuite.com/docs/truffle/quickstart

```
npm install truffle -g
```

## Setup local Blockchain

### Option1: Install Ganache - UI local blockchain

- Download here: https://www.trufflesuite.com/ganache
- How to start blockchain server?  
  Open Ganache ->
  - New workspace: If you want to save your network status to use later -> Add Project -> Point to truffle/smartcontracts/truffle-config.js -> Save
  - Quickstart: If you don't care about network status, just need a blockchain server to test your app.

### Option2: Install Ganache cli

- Download here: https://github.com/trufflesuite/ganache-cli

```
npm install -g ganache-cli
```

- How to start blockchain server?

```
# Generate new account set everytime you start
ganache-cli -p 7545

# Start fork with bsc network
ganache-cli --fork https://data-seed-prebsc-1-s1.binance.org:8545 -a 10 -l 80000000 -e 1000000
ganache-cli --fork https://bsc-dataseed.binance.org

Note for paramaters:
a: change default addresses
l: change default block limit
e: change default ETH balance
```

### Option3: Using hardhat node

- Read here: https://hardhat.org/hardhat-network/reference/

```
# The hardhat node supports HTTP and WebSocket JSON-RPC, provides eth_signTypedData_v4 while ganache-cli doesn't
npx hardhat node
```

## Build and Deploy Contract

```
* Note: remember start local blockchain first if you want to test on your local

# Node libs install
npm i

# Prepare wallet (skip this step for local deployment)
cp .env.example .env
Copy MNEMONIC generated by Ganache ACCOUNTS and paste to MNEMONIC value in .env created previous step

# Compile only
truffle compile

# Or Compile and deploy contract to local test
truffle migrate
truffle migrate -f 1 --to 1 --reset  --all

# Fow specific network
truffle migrate --network <network_name>

# Publish & Verify Contract
truffle run verify {contract_class_name}@{contract_address} --network <network_name>

# Validate
Check on Ganache in Blocks, Transactions, Contracts, Events, Logs, ...
```

---

# Create Testing Solidity token:

- Install Metamask
- The ETH wallets generated automatically

## Ropsten ETH Token

- Open Metamask -> Switch env to `Ropsten Test Network`

```
Network Name: Ropsten Test Network
New RPC URL: https://ropsten.infura.io/v3/undefined
Chain ID: 3
Currency Symbol (optional): ETH
Block Explorer URL (optional): https://ropsten.etherscan.io
```

- Get some ETH coin to deploy smart contract: https://faucet.ropsten.be/
- Access: https://remix.ethereum.org/#optimize=false&runs=200&evmVersion=null&version=soljson-v0.8.1+commit.df193b15.js
  - Create contracts/ERC20Token.sol
  - Fill `ERC20Token.sol` with source code at: [./truffle/smartcontracts/contracts/ERC20Token.sol](./truffle/smartcontracts/contracts/ERC20Token.sol)
  - Modify `ERC20Token.sol` to your token info
  - Compile tab: Compile `ERC20Token.sol`
  - Deploy tab: Select Environment -> Injected Web3 -> Select Contract `your contract class name` -> Deploy

## Binance Smart Chain BEP20 Token

https://academy.binance.com/en/articles/connecting-metamask-to-binance-smart-chain

- Open Metamask -> Custom RPC

```
# Testnet
Network Name: Binance Smart Chain - Testnet
New RPC URL: https://data-seed-prebsc-1-s1.binance.org:8545/
ChainID: 97
Symbol: BNB
Block Explorer URL: https://testnet.bscscan.com

# Mainnet
Network Name: Binance Smart Chain
New RPC URL: https://bsc-dataseed.binance.org/
ChainID: 56
Symbol: BNB
Block Explorer URL: https://bscscan.com
```

- Get some BNB coin to deploy smart contract: https://testnet.binance.org/faucet-smart
- Access: https://remix.ethereum.org and do the same with Ropsten ETH Token

## Avalanche (AVAX) Chain Token

https://docs.avax.network/build/tutorials/smart-contracts/deploy-a-smart-contract-on-avalanche-using-remix-and-metamask

- Open Metamask -> Custom RPC

```
# FUJI Testnet Settings
Network Name: Avalanche FUJI C-Chain
New RPC URL: https://api.avax-test.network/ext/bc/C/rpc
ChainID: 0xa869
Symbol: AVAX
Explorer: https://cchain.explorer.avax-test.network

# Avalanche Mainnet Settings
Network Name: Avalanche Mainnet C-Chain
New RPC URL: https://api.avax.network/ext/bc/C/rpc
ChainID: 0xa86a
Symbol: AVAX
Explorer: https://cchain.explorer.avax.network/
```

- AVAX address info:

> AVAX tokens exist on the X-Chain, where they can be traded, on the P-Chain, where they can be provided as a stake when validating the Primary Network, and on the C-Chain, where they can be used in smart contracts or to pay for gas. In this tutorial, weâ€™ll send AVAX tokens between the X-Chain and C-Chain.

- Get some AVAX coin to deploy smart contract: https://faucet.avax-test.network/

```
- Copy ETH address generated by Metamask -> Now this address will be C-Chain AVAX address
- Access https://wallet.avax.network/ -> Switch env to Fuji network
- Import wallet with private key of above C-Chain AVAX address
- Now you can see, we have 3 wallet address types with 3 address:
    + Available (X) = 0 (X-fuji1hjfdc8hsqtfju27lzfn8zyztlrdr9220ucura6)
    + Available (P) = 0 (P-fuji1hjfdc8hsqtfju27lzfn8zyztlrdr9220ucura6)
    + Available (C) = 0 (0xfd0c67edd5e4ce03cd8397dc748b19b0a5c0f645 <- reused eth address in Metamask)
- Access https://faucet.avax-test.network/ -> fill specific address to get test coin
- You can move you coin from X-Chain to C-Chain and vice versa with 'Cross Chain' at https://wallet.avax.network/wallet/cross_chain
```

- Access: https://remix.ethereum.org and do the same with Ropsten ETH Token

## Polkadot

- Moonbase Alpha TestNet

```
Moonbase Alpha TestNet
Network Name: Polkadot Moonbase Alpha
New RPC URL: https://rpc.testnet.moonbeam.network
ChainID: 1287
Symbol (Optional): DOT
Explorer: https://moonbase-blockscout.testnet.moonbeam.network/
```

## Upgrade contracts

> change the contract code, while preserving the state, balance, and address

- https://docs.openzeppelin.com/learn/upgrading-smart-contracts
- https://docs.openzeppelin.com/upgrades-plugins/1.x/writing-upgradeable
- https://docs.openzeppelin.com/upgrades-plugins/1.x/truffle-upgrades
